# ğŸ¤·â€â™€ï¸Â ì™œ ì‚¬ìš©í•˜ë‚˜?

- ë°ì´í„° ì†ŒìŠ¤ë¥¼ ëª¨ë¸ë¡œ ì •ì˜í•˜ê¸° ì–´ë ¤ìš´ ê²½ìš° - ë™ì  Json
    - ë™ì  Json
        
        ```json
        [
        	{
        	  "id": "1",  
        	  "name": "í™ê¸¸ë™",
        	  "email": 12345
        	},
        	{
        	  "id": "1",  
        	  "name": "í™ê¸¸ë™",
        	  "email": 12345,
        	  "address": "ì„œìš¸ì‹œ" // ê°‘ìê¸° ë“±ì¥..?
        	}
        ]
        
        ```
        
- ì„œë²„ì—ì„œ ì•„ì˜ˆ ì˜ëª» ë³´ë‚´ëŠ” ê²½ìš° ê°’ì„ ë³´ë‚´ëŠ” ê²½ìš°
    
    ```json
    [
    	{
    	  "id": "1",   // String?
    	  "name": "í™ê¸¸ë™",
    	  "email": 12345
    	},
    	{
    	  "id": 1,  // int..? ë­˜ì¨?
    	  "name": "í™ê¸¸ë™",
    	  "email": 12345,
    	}
    ]
    ```
    

# ğŸ“ŒÂ DTO(Data Transfer Object)

<aside>

ë°ì´í„° ì†ŒìŠ¤ë¥¼ ëª¨ë¸ í´ë˜ìŠ¤ì˜¤ ë³€í™˜í•˜ëŠ” ê³¼ì •ì—ì„œ 

ìˆœìˆ˜í•˜ê²Œ í´ë˜ìŠ¤ì— ë‹´ê¸° ìœ„í•œ ì¤‘ê°„ ì „ë‹¬ ê°ì²´ 

</aside>

```json
JSON ----> DTO -----> Model class
```

â€¼ï¸Â **ì™œ?**  ì˜ëª»ëœ ë°ì´í„° ì†ŒìŠ¤ (Json)ë¥¼ ë°›ë”ë¼ë„ ì•ˆ í„°ì§€ê²Œ í•˜ë ¤ëŠ” í´ë¼ì´ì–¸íŠ¸ ê°œë°œìì˜ ë°©ì–´ ìˆ˜ë‹¨

### ëª¨ë¸ í´ë˜ìŠ¤ì™€ ë¹„êµí•˜ì—¬ ì–´ë–¤ íŠ¹ì§•ì´ ìˆëŠ”ê°€?

- ëª¨ë“  í•„ë“œê°€ Nullable ë³€ìˆ˜
- ì§ë ¬í™”, ì—­ì§ë ¬í™” ì œê³µ

â†’ JSONì„ ë°›ì•„ë“œë¦¬ê³  ê¸°ì¡´ì˜ Model í´ë˜ìŠ¤ë¥¼ ëŒ€ì²´í•´ì„œ DTOë¡œ ì—­/ì§ë ¬í™” í•œë‹¤!

### DTO ë§Œë“œëŠ” ë²•

> ì¸ê³µì§€ëŠ¥ í™œìš©í•˜ê¸°
> 

```
jsoníŒŒì¼ ì˜¬ë¦¬ê³   
- DTO ë§Œë“¤ì–´ì¤˜
- ì´ë•Œ, ëª¨ë“  í•„ë“œê°€ Nullable ë³€ìˆ˜!
- (ì˜µì…˜) doubleì€ num!
```

â¤µï¸Â ì•„ë˜ì™€ ê°™ì´ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.

```dart
class TodoDto {
  final num? userId;
  final num? id;
  final String? title;
  final bool? completed;

  TodoDto({
    this.userId,
    this.id,
    this.title,
    this.completed,
  });

  // JSON ë°ì´í„°ë¥¼ ê°ì²´ë¡œ ë³€í™˜í•˜ëŠ” factory ìƒì„±ì
  factory TodoDto.fromJson(Map<String, dynamic> json) {
    return TodoDto(
      userId: json['userId'],
      id: json['id'],
      title: json['title'],
      completed: json['completed'],
    );
  }

  // ê°ì²´ë¥¼ JSON í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ë©”ì„œë“œ
  Map<String, dynamic> toJson() {
    return {
      'userId': userId,
      'id': id,
      'title': title,
      'completed': completed,
    };
  }
}

```

## ê·¸ëŸ¼, DTOë¥¼ ì ìš©í–ˆì„ ë•Œì˜ ëª¨ë¸ í´ë˜ìŠ¤ë¥¼ ì •ì˜í•´ ë³´ì

<aside>

### â€¼DTO ì—ì„œ ì—­/ì§ì—´í™”ë¥¼ ë‹¤ í•´ì£¼ë‹ˆê¹Œ ì¶”ê°€ë¡œ ê°€ëŠ¥ì„ êµ¬í˜„í•  í•„ìš”ì—†ìŒ

- ëª¨ë“  í•„ë“œëŠ” non-nullable ìƒìˆ˜
- ~~ì§ë ¬í™”~~ â
- ~~ì—­ì§ë ¬í™”~~â
- == ì¬ì •ì˜
- hashCode ì¬ì •ì˜
- toString() ì¬ì •ì˜
- copyWith() ì‘ì„±

íŠ¹ì§•

- Json ì„ ë°›ì§€ ì•Šê³  ë‚´ ì•±ì—ì„œ
í•„ìš”í•œ í˜•íƒœë¡œ í•„ë“œë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤
- Dtoë¥¼ ëª¨ë¸ë¡œ ë³€í™˜í•´ì„œ ì‚¬ìš©í•´ì•¼ í•¨
(ì´ë•Œ `mepper` ì‚¬ìš©)
</aside>

## Freezed

[freezed_annotation install | Dart package](https://pub.dev/packages/freezed_annotation/install)

[freezed | Dart package](https://pub.dev/packages/freezed#fromjsontojson)

```bash
dart pub add freezed
dart pub add freezed_annotation
dart pub add build_runner // ì´ë¯¸ ì„¤ì¹˜ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸ 
```

### freezed/ g íŒŒì¼ ìƒì„± ëª…ë ¹ì–´

```bash
dart run build_runner build
```

```bash
flutter clean                                           
flutter pub get
flutter pub run build_runner build --delete-conflicting-outputs
```

### Freezedë¥¼ ì ìš©í•œ Model ì˜ˆì‹œ

```dart
// ignore_for_file: annotate_overrides

import 'package:freezed_annotation/freezed_annotation.dart';

part 'todo.freezed.dart';
part 'todo.g.dart';

@freezed
@JsonSerializable(explicitToJson: true)
class Todo with _$Todo {
  final int userId;
  final int id;
  final String title;
  final bool completed;
  Todo({
    required this.userId,
    required this.id,
    required this.title,
    required this.completed,
  });

  factory Todo.fromJson(Map<String, dynamic> json) => _$TodoFromJson(json);
}

```

## DTO ë¥¼ ëª¨ë¸ í´ë˜ìŠ¤ë¡œ ë³€í™˜

<aside>

ìˆœìˆ˜í•œ ë°ì´í„° ì†ŒìŠ¤ (DTO) ë¥¼ ì›í•˜ëŠ” ëª¨ë¸ í´ë˜ìŠ¤ë¡œ ë³€í™˜í•˜ë ¤ë©´

fromJson(), toJson() ì²˜ëŸ¼ ë³€í™˜ ê¸°ëŠ¥ì´ í•„ìš”í•œë°, ë³„ë„ì˜ mapper ë¥¼ í†µí•´ ë³€í™˜ í•¨

</aside>

ë³€í™˜ ìˆœì„œëŠ” ì•„ë˜ì™€ ê°™ë‹¤.

```bash
JSON -----> DTO ---[Mapper]--> Model Class
```

---

# ğŸ“ŒÂ Mapper ì½”ë“œ ì‘ì„±ë²•

<aside>

- fromJson(), toJson() ë„ Mapper ë‹¤.
- `extension` ì„ í™œìš©í•˜ì—¬ ê¸°ëŠ¥ì„ ë¶„ë¦¬í•˜ë©´ DTOì™€ ë¶„ë¦¬ë˜ì–´ ê´€ë¦¬ìƒ ì¢‹ë‹¤
- [ğŸ‘‰[ë§í¬í´ë¦­] extension-methods](https://dart.dev/language/extension-methods)
</aside>

## Mapper ì½”ë“œ ì˜ˆì‹œ

<aside>

MapperëŠ” DTOë¥¼ ëª¨ë¸í´ë˜ìŠ¤ë¡œ ë³€í™˜í•˜ëŠ” ìœ í‹¸ ë©”ì†Œë“œì´ë‹¤. 
`extension` í•¨ìˆ˜ë¥¼ í™œìš©í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤.

Nullableì„ non_Nullableë¡œ ë³€í™˜í•˜ëŠ” ê²ƒì´ í•µì‹¬ 

DTO ì „ì²´ë¥¼ ë³€í™˜í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë‹¤. í•„ìš”í•œ ë¶€ë¶„ë§Œ ë°˜í™˜í•œë‹¤. 

</aside>

---

## ì¶”ì²œ í´ë” êµ¬ì¡°

```bash
ğŸ“‚ data_source 
		â†ªï¸ todo_data_source.dart
ğŸ“‚ dto 
		â†ªï¸ todo_dto.dart
ğŸ“‚ mepper 
		â†ªï¸ todo_mepper.dart
ğŸ“‚ model
		â†ªï¸ todo.dart
ğŸ“‚ data_source 
		â†ªï¸ todo_repository.dart
```