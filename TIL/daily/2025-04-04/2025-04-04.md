# 2025-04-04

# DTO(Data Transfer Object)

## 개념

- 데이터를 운반하는 객체
- 서버에서 받은 JSON 데이터를 Dart 객체로 바꾸거나, 반대로 Dart 객체를 서버로 보낼 때 JSON으로 바꾸는 데 사용

## 언제 쓰나?

- 서버에서 받아온 JSON 데이터를 앱에서 쓰기 좋게 정리할 때
- 사용자 입력을 서버에 보낼 때
- Firebase에서 데이터를 가져와서 앱에 뿌릴 때

## 왜 쓰는 걸까?

- **역할 분리**
    - 앱 로직과 서버 통신을 분리해서 더 깔끔한 코드 구조를 만들 수 있음
- **타입 안정성**
    - JSON 데이터를 그냥 쓰면 타입이 엉망일 수 있는데, DTO로 변환하면 안정적임.
- **가독성 / 유지보수성 향상**
    - 어떤 데이터가 어떻게 구성되어 있는지 명확해짐.

## 특징

- DTO 클래스에는 보통 `fromJson()`, `toJson()` 같은 함수가 정의됨
- 순수하게 데이터만 들고 있고, 로직은 거의 없음.

# Mapper

## 개념(역할)

- DTO ↔ 도메인(Model)간의 변환을 담당
- 서버에서 받은 DTO는 그대로 UI에 넘기면 안 되는 경우가 많아서 중간에 Mapper를 통해서 불필요한 데이터는 빼고, 필요한 데이터만 추려서 가공을 함

## 왜쓰는 걸까?

- 분리 책임 원칙(SRP)
    - 네트워크나 DB 로직과 UI/비즈니스 로직을 분리할 수 있음
- 유지보수 용이
    - API 변경 시 Mapper만 수정하면 되니까 전체 코드 수정량이 줄어듬
- 테스트 용이
    - Mapper만 단위 테스트하면 변환 로직 검증이 쉬어짐
- 가독성 향상
    - JSON 파싱이나 Map 변환 코드가 모델 안에 없어서 읽기 편해짐

# freezed 패키지

## 역할

- Dart의 모델 클래스를 깔끔하게, 안전하게, 자동으로 만들어주는 코드 생성 도구
- `copyWith`, `==`, `hashCode`, `toString`, `when`, `map`, `fromJson`, `toJson` 등을 자동으로 만들어주는 패키지

## 언제 쓰나?

- 서버에서 받은 JSON 데이터를 Dart 객체로 바꿔야 할 때
- 불변(immutable) 객체를 쓰고 싶을 때
- 여러 상태(enum처럼 구분되는 상태)를 다뤄야 할 때 (e.g. `Loading`, `Success`, `Error`)
- `copyWith`로 값만 일부 바꿔야 할 때